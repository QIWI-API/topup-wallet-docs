# Статусы платежей {#statuses}

###### Последнее обновление: 2020-07-10

API возвращает статус платежа в атрибуте `status` тега `<payment>`.

Финальный статус означает, что жизненный цикл платежа в сервисе QIWI Wallet завершен и его статус больше не изменится.

API возвращает статусы из следующих диапазонов:

Статус | Описание | Финальный статус
-----|---------|-------------
\-1	| Платеж не был зарегистрирован из-за временной ошибки. Попробуйте повторить запрос позже. **Если ранее на запрос выплаты вы получили статус отличный от -1, то продолжайте [запрашивать статус платежа](#status), до получения финального статуса**|
0\-49|Платеж принят, но ждет подтверждения со стороны системы QIWI Wallet. Свяжитесь с техническими специалистами системы QIWI Wallet: <a href="mailto:bss@qiwi.com">bss@qiwi.com</a> | \-
50\-59	| Платеж находится в проведении. Средства списаны со счета Контрагента.| \-
50|Платеж принят в обработку| \-
52|Средства зачисляются| \-
60|Платеж проведен| \+
\> 100|Общий статус. Ошибка проведения платежа. Средства возвращены на баланс Контрагента.| \+
150|Платеж не принят|\+
151|Ошибка авторизации платежа|\+
160|Платеж не проведен или отменен|\+

# Коды ошибок обработки платежа {#error}

API возвращает информационный код ошибки обработки платежа в атрибуте `result-code` тега `<payment>`.

Код обработки| Описание ошибки
-----|--------
0| Ошибок нет
155|Запрещен прием платежей в пользу данного сервиса. Тег `to/service-id` в запросе проведения платежа должен быть равен `34020` для выплаты на карту, `38413` для выплаты через СБП или `99` для пополнения QIWI кошелька.
204 | Недостаточный статус идентификации кошелька для проведения платежа пополнения кошелька
215| Запрос проведения платежа содержит уже существующий номер транзакции платежа (`transaction-number`), но другие реквизиты платежа. Необходимо привести реквизиты платежа в соответствие данному номеру транзакции платежа.
220|Недостаточно средств на счете для проведения платежа
242|Сумма платежа больше допустимой
300|Неизвестная ошибка обработки запроса. Обратитесь к техническим специалистам системы QIWI Wallet: <a href="mailto:bss@qiwi.com">bss@qiwi.com</a>
316|Попытка авторизации заблокированного Контрагента

При появлении не описанных в данной таблице ошибок свяжитесь с техническими специалистами системы QIWI Wallet: <a href="mailto:bss@qiwi.com">bss@qiwi.com</a>.

# Коды ошибок обработки запроса {#tech_error}

API возвращает код ошибки обработки запроса в теге `<result-code>`. Ошибки с кодом > 0 возвращаются, если сервер не смог обработать запрос (в ответе отсутствуют запрашиваемые данные).

Код ошибки|Описание
----|------
0|Ошибок нет
13|Повторите запрос через минуту
150|Ошибка авторизации. Уточните логин и пароль, а затем повторите запрос
300|Неизвестная ошибка. Повторите запрос
339|Ограничение по IP адресу

При появлении не описанных в данной таблице ошибок свяжитесь с техническими специалистами системы QIWI Wallet: <a href="mailto:bss@qiwi.com">bss@qiwi.com</a>.

# Формат XML-данных {#params-types}

Тег/атрибут|Тип данных
--------|----------
`request-type`|Строка буквенных символов
`terminal-id`|Целое положительное число
`transaction-number`|Целое положительное число до 20 разрядов
`amount`|Дробное число (2 знака после запятой, разделителем является точка)
`to/service-id`| Константа: `34020` для выплат на банковские карты, `99` для выплат на QIWI кошельки, `38413` для выплат через СБП
`from/service-id`|Целое положительное число
`to/account-number`|Для пополнений QIWI кошельков — номер телефона в международном формате без лидирующего знака `+`.<br>Для выплат на банковские карты -— номер банковской карты, только цифры от 0 до 9 без пробелов.<br>Для выплат через СБП — номер телефона в формате `7хххххххххх`.
`final-status`|Логическое значение (`true/false`)
`fatal-error`|Логическое значение (`true/false`)
`txn-date`| Временная метка в формате:<br>`dd.MM.yyyy HH:mm:ss`
`balance`|Дробное число (2 знака после запятой, разделителем является точка)
`fatal`|Логическое значение (`true/false`)
`exist`|`0/1`
`income_wire_transfer`|`0/1`
`"deposit-possible"`|`0/1`
`name="password"`|Строка символов
`name="comment"`|Строка символов (до 1000 символов)
`name="phone"`|Номер телефона в международном формате без лидирующего знака `+`
`name="source_first_name"` | Строка буквенных символов
`name="source_last_name"` | Строка буквенных символов
`name="source_address"` | Строка символов
`name="source_city"`| Строка символов
`name="source_country_code"` | Строка буквенных символов
`name="source_zip_code"` |Целое положительное число
`name="source_resident"` |Целое положительное число
`name="source_birthday"` | Дата в формате: `дд.мм.гггг`
`name="target_card_holder"` | Строка буквенных символов
