# Проверка регистрации клиента {#check-user}

###### [Редактировать на GitHub](https://github.com/QIWI-API/topup-wallet-doc/blob/master/_check-user_ru.html.md)

Данным запросом вы можете до проведения платежа проверить, зарегистрирована ли учетная запись Клиента в системе QIWI Wallet.

Проверка существования учетной записи Клиента не является обязательной для регистрации платежа. При успешной [регистрации платежа](#payment) отсутствующая в системе QIWI Wallet учетная запись Клиента создаётся автоматически.

## Формат запроса {#user-req}

### Параметры запроса

~~~xml
<?xml version="1.0" encoding="utf-8"?>
<request>
  <request-type>check-user</request-type>
  <terminal-id>123</terminal-id>
  <extra name="password">XXXXX</extra>
  <extra name="phone">79031234567</extra>
  <extra name="ccy">RUB</extra>
</request>
~~~

Тег|Описание
--------|------
*request*|Группирующий тег
*request-type* | Тип запроса (идентификатор запроса проверки существования учетной записи Клиента в системе: `check-user`)
*terminal-id* | Идентификатор агента в системе QIWI Wallet
*extra name="password"* | Экстра-поле, содержащее пароль для аутентификации агента в системе QIWI Wallet
*extra name="phone"* | Экстра-поле, содержащее номер телефона Клиента, регистрацию учетной записи которого необходимо проверить
*extra name="ccy"* | Экстра-поле, содержащее код валюты учетной записи Клиента. Опциональный параметр. В случае его передачи проверяется наличие у Клиента учетной записи в данной валюте. В качестве значения используется цифровой или буквенный код валюты по ISO 4217.

## Формат ответа {#user-res}

### Ответ без ошибок обработки запроса

Если запрос обработан корректно, то в ответе возвращаются сведения о Клиенте.

~~~xml
<?xml version="1.0" encoding="utf-8"?>
<response>
  <result-code fatal="false">0</result-code>
  <exist>1</exist>
</response>
~~~

Параметры ответа:

 Тег|Описание|Атрибуты
--------|------|---------
*result-code* | [Код ошибки обработки запроса](#tech_error).| `fatal` – логический признак фатальности ошибки обработки запроса.
*exist* | Флаг, указывающий на существование учетной записи Клиента в системе QIWI Wallet. Флаг передается в ответе только в случае удачной обработки запроса (с кодом ошибки 0). Флаг может принимать значения:<br>`0` – учетная запись Клиента не зарегистрирована в системе QIWI Wallet (в случае если в исходном запросе указана валюта (тег `<extra name="ccy">`), это означает, что у Клиента нет учетной записи в данной валюте);<br>`1` – учетная запись Клиента зарегистрирована в системе QIWI Wallet (в случае если в исходном запросе указана валюта (тег `<extra name="ccy">`), это означает, что Клиент имеет учетную запись в данной валюте).|Отсутствуют.

### Ответ с ошибками обработки запроса

Если сервер не смог обработать запрос,  API возвращает ответ с кодом произошедшей ошибки.

~~~xml
<?xml version="1.0" encoding="utf-8"?>
<response>
  <result-code fatal="false" message="Неизвестная ошибка" msg="Неизвестная ошибка">300</result-code>
</response>
~~~

Параметры ответа:

 Тег|Описание|Атрибуты
--------|------|---------
*result-code* | [Код ошибки обработки запроса](#tech_error)| `fatal` – логический признак фатальности ошибки обработки запроса;<br>`message`, `msg` - текстовое описание ошибки.
